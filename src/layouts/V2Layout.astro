---
interface Props {
  title?: string;
  description?: string;
}

const { 
  title = "Dipankar Shaw â€¢ Full Stack Developer", 
  description = "Full stack developer from India, focused on building reliable products with Node, Bun, TypeScript, React, Vue, Python, and more."
} = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{title}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content={description}>
  <meta name="generator" content={Astro.generator}>
  <link rel="icon" type="image/png" href="/its-d32.png">
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen bg-slate-950 text-slate-100 antialiased selection:bg-teal-400/40 selection:text-slate-50" style="font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">
  <div class="relative min-h-screen overflow-x-hidden bg-gradient-to-b from-slate-950 via-slate-950 to-slate-950">
    <!-- Glow background -->
    <div class="pointer-events-none fixed inset-0 -z-10 overflow-hidden">
      <div class="absolute -top-32 left-1/2 h-80 w-80 -translate-x-1/2 rounded-full bg-teal-500/20 blur-3xl"></div>
      <div class="absolute top-1/3 -left-24 h-72 w-72 rounded-full bg-cyan-500/10 blur-3xl"></div>
      <div class="absolute bottom-0 -right-24 h-72 w-72 rounded-full bg-purple-900/40 blur-3xl"></div>
    </div>

    <slot />
  </div>

  <!-- Theme toggle script -->
  <script is:inline>
    (function () {
      const body = document.body;
      const THEME_KEY = 'ds-portfolio-theme';

      function setBaseThemeClasses(isLight) {
        if (isLight) {
          body.classList.remove('bg-slate-950', 'text-slate-100');
          body.classList.add('bg-slate-50', 'text-slate-900');
        } else {
          body.classList.remove('bg-slate-50', 'text-slate-900');
          body.classList.add('bg-slate-950', 'text-slate-100');
        }
      }

      function applyTheme(theme) {
        const isLight = theme === 'light';
        setBaseThemeClasses(isLight);

        const iconSun = document.getElementById('theme-icon-sun');
        const iconMoon = document.getElementById('theme-icon-moon');
        const label = document.getElementById('theme-toggle-label');

        if (iconSun && iconMoon && label) {
          if (isLight) {
            iconSun.classList.remove('hidden');
            iconMoon.classList.add('hidden');
            label.textContent = 'Light';
          } else {
            iconSun.classList.add('hidden');
            iconMoon.classList.remove('hidden');
            label.textContent = 'Dark';
          }
        }

        try {
          localStorage.setItem(THEME_KEY, theme);
        } catch (_) {}
      }

      function initTheme() {
        let stored = null;
        try {
          stored = localStorage.getItem(THEME_KEY);
        } catch (_) {}

        if (stored === 'light' || stored === 'dark') {
          applyTheme(stored);
        } else {
          const prefersDark =
            window.matchMedia &&
            window.matchMedia('(prefers-color-scheme: dark)').matches;
          applyTheme(prefersDark ? 'dark' : 'light');
        }
      }

      // Initialize theme
      initTheme();

      // Setup toggle button after DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
        const toggleBtn = document.getElementById('theme-toggle');
        if (toggleBtn) {
          toggleBtn.addEventListener('click', () => {
            const label = document.getElementById('theme-toggle-label');
            const current = label?.textContent === 'Light' ? 'light' : 'dark';
            const next = current === 'light' ? 'dark' : 'light';
            applyTheme(next);
          });
        }
      });
    })();
  </script>
</body>
</html>
